(function(){this.t.subtest("Synth JSON",function(){var t,s,e,a,r,n,i,h,y,o;for(n=window.player.session.song,e=window.player.synth[0],s=e.getParam(),a={name:"s0",type:"REZ",pattern_name:"p1",scale_name:"minor",gains:[0,1,2],filter:[3,4],eg:{adsr:[11,22,33,44],range:[1,5]},feg:{adsr:[55,66,77,88],range:[10,50]},vcos:[{fine:1,interval:2,octave:3,shape:"SINE"},{fine:4,interval:5,octave:6,shape:"SAW"},{fine:7,interval:8,octave:9,shape:"RECT"}],harmony:"harmony"},e.setSynthName(a.name),e.setScale(a.scale_name),e.core.setParam(a),r=e.getParam(),this.assertEq(a.name,r.name,"synth name"),this.assertEq(a.scale_name,r.scale_name,"scale"),this.assertArrayEq(a.gains,r.gains,"mixer gains"),this.assertArrayEq(a.filter,r.filter,"filter"),this.assertArrayEq(a.eg.adsr,r.eg.adsr,"eg adsr"),this.assertArrayEq(a.feg.adsr,r.feg.adsr,"feg adsr"),this.assertEq(a.shape,r.shape,"harmony"),t=y=0,o=a.vcos.length;o>=0?o>y:y>o;t=o>=0?++y:--y)i=a.vcos[t],h=r.vcos[t],this.assertEq(i.fine,h.fine,"fine"),this.assertEq(i.interval,h.interval,"interval"),this.assertEq(i.octave,h.octave,"octave"),this.assertEq(i.shape,h.shape,"shape");return e.setParam(s)}),this.t.subtest("Change synth type",function(){var t;return t=window.player.synth[0],$(".synth-type").eq(0).val("SAMPLER").change(),this.assertEq(window.player.synth[0].type,"SAMPLER","changed to SAMPLER"),this.assertEq(window.player.synth.length,1,"only 1 synth"),$(".synth-type").eq(0).val("REZ").change(),this.assertEq(window.player.synth[0].type,"REZ","changed to REZ")}),this.t.subtest("Synth Sequencer",function(){var t,s,e,a,r;for(a=window.player.synth[0],t=$("#synth0 > .sequencer .table-hover"),e=a.getPattern().pattern,s=r=0;3>r;s=++r)this.mousedown(t,26*s+10,10),this.mouseup(t);return e[0]=20,e[1]=20,e[2]=20,this.assertArrayEq(e,a.getPattern().pattern,"click"),this.mousedrag(t,[{x:218,y:10},{x:374,y:10}]),e=[20,20,20,0,0,0,0,0,-20,"sustain","sustain","sustain","sustain","sustain","end",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.assertArrayEq(e,a.getPattern().pattern,"drag"),this.mousedrag(t,[{x:270,y:36},{x:296,y:36},{x:322,y:36}]),e=[20,20,20,0,0,0,0,0,-20,"end",-19,"sustain","end",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.assertArrayEq(e,a.getPattern().pattern,"drag and divide sustain"),this.mousedrag(t,[{x:244,y:62},{x:270,y:62}]),e=[20,20,20,0,0,0,0,0,20,-18,"end",-19,"end",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.assertArrayEq(e,a.getPattern().pattern,"drag and join sustain"),this.mousedrag(t,[{x:218,y:10},{x:374,y:10}]),this.mousedrag(t,[{x:270,y:36},{x:296,y:36},{x:322,y:36}]),this.mousedrag(t,[{x:244,y:62},{x:270,y:62},{x:296,y:62}]),e=[20,20,20,0,0,0,0,0,20,-18,"sustain","end",19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.assertArrayEq(e,a.getPattern().pattern,"drag and join sustain"),this.mousedrag(t,[{x:374,y:10},{x:218,y:10}]),this.mousedrag(t,[{x:322,y:36},{x:296,y:36},{x:270,y:36}]),this.mousedrag(t,[{x:296,y:62},{x:270,y:62},{x:244,y:62}]),e=[20,20,20,0,0,0,0,0,20,-18,"sustain","end",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.assertArrayEq(e,a.getPattern().pattern,"drag RL")})}).call(this);