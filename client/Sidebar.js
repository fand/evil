(function(){var s=function(s,t){return function(){return s.apply(t,arguments)}};this.Sidebar=function(){function t(t,e,i,r){this.ctx=t,this.player=e,this.session=i,this.mixer=r,this.addTracksEffect=s(this.addTracksEffect,this),this.addMasterEffect=s(this.addMasterEffect,this),this.sidebar_pos={x:0,y:1,type:"master"},this.view=new SidebarView(this)}return t.prototype.show=function(s,t){if(this.song=s,this.select_pos=t,"tracks"===this.select_pos.type){if(this.sidebar_pos.x===this.select_pos.x&&this.sidebar_pos.type===this.select_pos.type)return;return this.saveTracksEffect(this.sidebar_pos.x),this.sidebar_pos=this.select_pos,this.view.showTracks(this.player.synth[this.select_pos.x])}return this.sidebar_pos.y!==this.select_pos.y||this.sidebar_pos.type!==this.select_pos.type?(this.sidebar_pos=this.select_pos,this.view.showMaster(this.song.master[this.select_pos.y])):void 0},t.prototype.saveMaster=function(s){return-1!==this.sidebar_pos.y?this.session.saveMaster(this.sidebar_pos.y,s):void 0},t.prototype.saveTracksEffect=function(){return"master"!==this.sidebar_pos.type?this.session.saveTracksEffect(this.sidebar_pos):void 0},t.prototype.addMasterEffect=function(s){return this.mixer.addMasterEffect(s)},t.prototype.addTracksEffect=function(s){return this.mixer.addTracksEffect(this.sidebar_pos.x,s)},t.prototype.setBPM=function(s){return this.view.setBPM(s)},t.prototype.setKey=function(s){return this.view.setKey(s)},t.prototype.setScale=function(s){return this.view.setScale(s)},t}()}).call(this);